import org.jetbrains.kotlin.gradle.tasks.KotlinCompile

plugins {
    id "org.jetbrains.kotlin.jvm" version "1.2.10"
    id "org.junit.platform.gradle.plugin" version "1.0.2"
    id "konan" version "0.3.4" // 0.4.0 issue
}

// Repositories block for downloading dependencies in the "dependencies" block
// See: https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:repositories(groovy.lang.Closure)
repositories {
    jcenter()
}

tasks.withType(KotlinCompile) {
    kotlinOptions {
        jvmTarget = rootProject.ext.javaVersion
        allWarningsAsErrors = true
    }
}

junitPlatform {
    filters {
        engines {
            include "spek"
        }
    }
}

// See: https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:dependencies(groovy.lang.Closure)
dependencies {
    implementation deps.kotlinStdlib
    implementation deps.kotlinReflect

    testImplementation deps.spekApi
    testImplementation deps.spekJunitPlatformEngine
    testImplementation deps.junitPlatformRunner
    testImplementation deps.truth
    testImplementation deps.equalsverifier
}
