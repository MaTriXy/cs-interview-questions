apply plugin: "pmd"
apply plugin: "jacoco"
apply plugin: "findbugs"
apply plugin: "checkstyle"
apply plugin: "net.ltgt.errorprone"
apply plugin: "com.github.kt3k.coveralls"

jacocoTestReport {
    reports {
        xml.enabled = true // coveralls plugin depends on xml format report
        html.enabled = true
    }

    afterEvaluate {
        classDirectories = files(classDirectories.files.collect {
            fileTree(dir: it,
                    exclude: ["codeeval/**",
                              "crackingthecode/part3knowledgebased/**",
                              "**/Chapter7ObjectOrientedDesign**",
                              "**/Chapter11Testing**",
                              "**/Chapter12SystemDesignAndMemoryLimits**",
                              "projecteuler/**"])
        })
    }
}

findbugs {
    effort = "max"
    reportLevel = "high"
}

tasks.withType(FindBugs) {
    reports {
        xml.enabled false
        html.enabled true
    }
}
