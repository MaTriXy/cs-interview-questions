plugins {
    id 'java-library'
    id 'groovy'
    id 'net.ltgt.errorprone' version '0.8.1'
}

apply from: rootProject.file('gradle/compile.gradle')

sourceCompatibility = rootProject.versions.java
targetCompatibility = rootProject.versions.java

dependencies {
    compileOnly deps.findbugs

    errorprone deps.errorprone.core
    errorproneJavac deps.errorprone.javac

    testImplementation localGroovy()
    testImplementation deps.spock, { exclude module: 'groovy-all' } // Use localGroovy()
    testImplementation deps.equalsverifier
}

tasks.withType(JavaCompile).configureEach {
    options.errorprone {
        // allDisabledChecksAsWarnings = true
        disableWarningsInGeneratedCode = true
        // normal
        disable(
            "UnusedMethod",
            "UnusedVariable",
        )
        // disabled checks
        disable(
            "AndroidJdkLibsChecker",
            "ConstructorInvokesOverridable",
            "ConstructorLeaksThis",
            "FieldCanBeFinal",
            "InconsistentOverloads",
            "InterfaceWithOnlyStatics",
            "Java7ApiChecker",
            "MethodCanBeStatic",
            "PrivateConstructorForUtilityClass",
            "ReturnMissingNullable",
            "TypeParameterNaming",
            "UngroupedOverloads",
            "Var",
        )
    }
}
