plugins {
    id 'java-library'
    id 'groovy'
    id 'net.ltgt.errorprone' version '0.6'
}

repositories {
    gradlePluginPortal()
}

apply from: rootProject.file('gradle/compile.gradle')

sourceCompatibility = rootProject.versions.java
targetCompatibility = rootProject.versions.java

dependencies {
    compileOnly deps.findbugs

    errorprone deps.errorprone.core
    errorproneJavac deps.errorprone.javac

    testImplementation localGroovy()
    testImplementation deps.spock, { exclude module: 'groovy-all' } // Use localGroovy()
    testImplementation deps.equalsverifier
}

tasks.withType(JavaCompile) {
    configure(options) {
        errorprone {
            disableWarningsInGeneratedCode = true
            // errorproneArgs << '-XepAllDisabledChecksAsWarnings'
            errorproneArgs << '-Xep:Var:OFF'
            errorproneArgs << '-Xep:MethodCanBeStatic:OFF'
            errorproneArgs << '-Xep:UngroupedOverloads:OFF'
            errorproneArgs << '-Xep:Java7ApiChecker:OFF'
            errorproneArgs << '-Xep:AndroidJdkLibsChecker:OFF'
            errorproneArgs << '-Xep:InconsistentOverloads:OFF'
            errorproneArgs << '-Xep:PrivateConstructorForUtilityClass:OFF'
            errorproneArgs << '-Xep:ReturnMissingNullable:OFF'
        }
    }
}
