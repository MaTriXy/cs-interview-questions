// Plugins block for applying local and plugins from the Gradle repository
// See: https://docs.gradle.org/current/userguide/plugins.html#sec:plugins_block
buildscript {
    apply from: rootProject.file("gradle/versions.gradle")
}

plugins {
    // Plugins from the gradle repository
    id "com.gradle.build-scan" version "1.8"
    id "net.ltgt.errorprone" version "0.0.11"
    id "com.github.kt3k.coveralls" version "2.8.1"
    id "com.github.ben-manes.versions" version "0.15.0"
    id "org.asciidoctor.convert" version "1.5.3"
    id "org.jetbrains.kotlin.jvm" version "1.1.4-3"
    // Built in plugins
    id "c"
    id "cpp"
    id "cunit-test-suite"
    id "google-test-test-suite"
    id "groovy"
    id "jacoco"
    id "java-library"
}

// Repositories block for downloading dependencies in the "dependencies" block
// See: https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:repositories(groovy.lang.Closure)
repositories {
    jcenter()
}

// Apply extra configuration
// Place this first so it can scan the build
apply from: rootProject.file("gradle/scan.gradle")
// Other plugin configurations
apply from: rootProject.file("gradle/asciidoc.gradle")
apply from: rootProject.file("gradle/c.gradle")
apply from: rootProject.file("gradle/compile.gradle")
apply from: rootProject.file("gradle/coveralls.gradle")
apply from: rootProject.file("gradle/cpp.gradle")
apply from: rootProject.file("gradle/jacoco.gradle")
apply from: rootProject.file("gradle/wrapper.gradle")

// See: https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:dependencies(groovy.lang.Closure)
dependencies {
    implementation deps.kotlinStdlib

    compileOnly deps.annotations

    testImplementation localGroovy()
    testImplementation deps.spockCore, { exclude module: "groovy-all" } // Use localGroovy()
    testImplementation deps.equalsverifier
}
